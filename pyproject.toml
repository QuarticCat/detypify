[project]
name = "detypify-model"
version = "0.2.4"
requires-python = ">=3.13"
authors = [
  { name = "QuarticCat", email = "QuarticCat@pm.me" },
  { name = "Cloud0310", email = "gh@touchingfish.day" }
]
dependencies = [
  "beautifulsoup4>=4.14.3",
  "fonttools[woff]>=4.61.0",
  "lightning>=2.6.0",
  "lxml>=6.0.2",
  "msgspec>=0.20.0",
  "onnx>=1.20.0",
  "onnxscript>=0.5.7",
  "pillow>=12.0.0",
  "polars>=1.37.1",
  "pyarrow>=23.0.0",
  "scikit-learn>=1.8.0",
  "timm>=1.0.22",
  "torch",
  "torchvision",
  "typed-argument-parser>=1.11.0",
]

[dependency-groups]
dev = [
  "ipykernel>=7.1.0",
  "ipython>=9.9.0",
  "lxml-stubs>=0.5.1",
  "pyrefly",
  "tensorboard>=2.20.0",
  "tensorboardx>=2.6.4",
  "torch-tb-profiler>=0.4.3",
  "viztracer>=1.1.1",
  "zuban",
]

# linter and formatter, line-length 88 as black default
[tool.ruff]
line-length = 88

# default set and isort
[tool.ruff.lint]
select = ["E4", "E7", "E9", "F", "I"]

[tool.uv.sources]
torch = [
  { index = "pytorch-cu130" },
]
torchvision = [
  { index = "pytorch-cu130" },
]

[[tool.uv.index]]
name = "pytorch-cu130"
url = "https://download.pytorch.org/whl/cu130"
explicit = true

# zuban sys.path finding, for python lsp
[tool.zuban]
mypy_path = ["python"]
